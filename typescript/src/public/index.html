<!DOCTYPE html>
<html>
<body>

<div id="content">Loading...</div>

<script type="text/javascript">

    // Do login
    fetch('/api/auth/login', {
        method: 'POST',
        body: JSON.stringify({
            username: 'test',
            password: 'test123'
        })
    })
        .then(result => result.json())
        .then(data => {
            fetch('/api/page/secret', {
                headers: {
                    authorization: `Bearer ${data.token || ''}`
                }
            })
                .then(result => result.json())
                .then(data => document.getElementById('content').innerText = data)
        });


</script>
</body>
</html>
